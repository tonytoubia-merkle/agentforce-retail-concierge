<template>
    <div class="preview-container">
        <!-- Channel Toggle Display -->
        <div class="channel-badge-container">
            <span class={channelBadgeClass}>{channel}</span>
        </div>

        <!-- Email Preview -->
        <template if:true={isEmailChannel}>
            <div class="email-preview">
                <!-- Email Header (mock inbox) -->
                <div class="email-header">
                    <div class="email-header-row">
                        <span class="email-from">BEAUTÉ</span>
                        <span class="email-date">{previewDate}</span>
                    </div>
                    <div class="email-to">
                        To: {contactName} &lt;{contactEmail}&gt;
                    </div>
                    <div class="email-subject">
                        <strong>{subject}</strong>
                    </div>
                </div>

                <!-- Email Body -->
                <div class="email-body">
                    <!-- Hero Image with Text Overlay -->
                    <template if:true={hasHeroImage}>
                        <div class="hero-image-container">
                            <img src={heroImageUrl} alt="Journey hero image" class="hero-image" />
                            <div class="hero-text-overlay">
                                <h1 class="hero-headline">{heroHeadline}</h1>
                                <p class="hero-subheadline">{heroSubheadline}</p>
                                <a href="#" class="hero-cta">Shop Now</a>
                            </div>
                        </div>
                    </template>

                    <!-- Body Content with Inline Products -->
                    <div class="email-content-wrapper">
                        <div class="email-content" lwc:dom="manual"></div>

                        <!-- Product Grid - Integrated into body flow -->
                        <template if:true={hasProducts}>
                            <div class="product-section-inline">
                                <h3 class="product-section-title-inline">Recommended For You</h3>
                                <div class="product-grid-inline">
                                    <template for:each={displayProducts} for:item="product">
                                        <div key={product.productCode} class="product-card-inline">
                                            <img src={product.imageUrl} alt={product.name} class="product-card-image-inline" />
                                            <p class="product-card-name-inline">{product.name}</p>
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </template>

                        <!-- Closing signature -->
                        <div class="email-signature">
                            <p>Warm regards,</p>
                            <p class="signature-name">The BEAUTÉ Team</p>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="email-footer">
                        <p class="footer-logo">BEAUTÉ</p>
                        <p class="footer-tagline">Curated beauty for the modern you.</p>
                        <p class="footer-links">
                            <a href="#">Unsubscribe</a> | <a href="#">View in Browser</a> | <a href="#">Privacy Policy</a>
                        </p>
                        <p class="footer-address">123 Beauty Lane, Paris, France 75001</p>
                    </div>
                </div>
            </div>
        </template>

        <!-- SMS Preview -->
        <template if:true={isSmsChannel}>
            <div class="sms-preview">
                <div class="sms-phone-frame">
                    <div class="sms-phone-header">
                        <span class="sms-carrier">BEAUTÉ</span>
                        <span class="sms-time">{previewDate}</span>
                    </div>
                    <div class="sms-messages">
                        <div class="sms-bubble">
                            <p class="sms-text">{smsPreviewBody}</p>
                        </div>
                    </div>
                    <div class="sms-char-count">{smsCharCount}</div>
                </div>
            </div>
        </template>

        <!-- Push Notification Preview -->
        <template if:true={isPushChannel}>
            <div class="push-preview">
                <div class="push-notification">
                    <div class="push-icon">
                        <span class="push-icon-text">B</span>
                    </div>
                    <div class="push-content">
                        <div class="push-app-name">BEAUTÉ</div>
                        <div class="push-title">{pushTitle}</div>
                        <div class="push-body">{pushBody}</div>
                    </div>
                    <div class="push-time">now</div>
                </div>
            </div>
        </template>
    </div>
</template>
